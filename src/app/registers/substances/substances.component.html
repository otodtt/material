<section>
    <div class="container">
        <div class="row-header">
            <h1>Регистър на използваните активни вещества и разрешените за пускане на пазара и употреба ПРЗ в Република България</h1>
        </div>
        <div class="example-container mat-elevation-z8">
            <div class="example-loading-shade"
                *ngIf="isLoadingResults || isRateLimitReached">
                <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
                <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
                    Моля, презаредете страницата отново!
                </div>
            </div>

            <div class="example-header">
                <mat-form-field>
                    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Филтър">
                </mat-form-field>
            </div>

            <mat-table #table
                    matSort matSortActive="name" matSortDisableClear matSortDirection="asc"
                    [dataSource]="dataSource" multiTemplateDataRows class="example-table">

                <ng-container matColumnDef="name">
                  <mat-header-cell *matHeaderCellDef mat-sort-header disableClear="true" class="header-name">
                    <span class="product-span"><mat-icon>sort</mat-icon></span>
                  </mat-header-cell>
                  <mat-cell *matCellDef="let row">
                    <p class="row-name">
                      {{ row.name }}
                    </p>
                  </mat-cell>
                </ng-container>

                <ng-container matColumnDef="products">
                  <mat-header-cell *matHeaderCellDef mat-sort-header disableClear="true" class="header-products">
                    <span class="product-span">ПРОДУКТИ</span>
                  </mat-header-cell>
                  <mat-cell *matCellDef="let row; let isOdd=odd; let isEven=even">
                    <table id="my-in-table" [class.odd]="isOdd" [class.even]="isEven">
                      <tr *ngFor="let prod of row.products">
                        <td class="pesticide_type">
                          <span *ngIf="prod.pesticide_type == 'fungicides'">Фунгицид</span>
                          <span *ngIf="prod.pesticide_type == 'insecticides'">Инсектицид</span>
                          <span *ngIf="prod.pesticide_type == 'acaricides'">Акарицид</span>
                          <span *ngIf="prod.pesticide_type == 'nematocides'">Нематоцид</span>
                          <span *ngIf="prod.pesticide_type == 'limatsides'">Лимацид</span>
                          <span *ngIf="prod.pesticide_type == 'herbicides'">Хербицид</span>
                        </td>
                        <td >
                          <a matLine [routerLink]="[ '/products/' + prod.pesticide_type + '/' + prod.pesticides_id ]"
                            matTooltip="Подробно за продукта">
                            {{ prod.pesticide_name }}
                          </a>
                          <span> на фирма </span>
                          <a matLine routerLink="../firms/{{prod.manufacturersId}}"
                            matTooltip="Към фирмата">
                            {{ prod.firmName | uppercase }}
                          </a>
                        </td>
                      </tr>
                    </table>
                  </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="columnsToDisplay" class="my-header-row"></mat-header-row>
                <mat-row *matRowDef="let row; columns: columnsToDisplay;"></mat-row>
            </mat-table>

            <mat-paginator #paginator
                            [pageSize]="10"
                            [pageSizeOptions]="[20, 50, 100]"
                            [showFirstLastButtons]="true">
            </mat-paginator>
        </div>
    </div>
</section>


<!-- <div id="my-in-table">
  <div id="my-table-row-show" [class.odd]="isOdd" [class.even]="isEven">
    <p class="row-name">
      {{ row.name }}
      <mat-icon style="float: right">home</mat-icon>
    </p>
  </div>
  <div style="display: table-row; background: beige">
    <ol>
      <li *ngFor="let prod of row.products">{{ prod.pesticide_name }}</li>
    </ol>
  </div>
</div> -->



<!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
<!-- <ng-container matColumnDef="{{column}}" *ngFor="let column of columnsToDisplay">
  <th mat-header-cell *matHeaderCellDef mat-sort-header>
    <mat-icon>sort</mat-icon>
  </th>
  <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
</ng-container>

<ng-container matColumnDef="expandedDetail">
  <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
    <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
      <div class="example-element-diagram">
        <div class="example-element-position"> tets</div>

      </div>
    </div>
  </td>
</ng-container> -->

<!-- <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
<tr mat-row *matRowDef="let element; columns: columnsToDisplay" class="example-element-row"
  [class.example-expanded-row]="expandedElement === element"
  (click)="expandedElement = expandedElement === element ? null : element">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr> -->
